{"version":3,"sources":["map.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"map.js","sourcesContent":["(function(){\n\t/**\n\t * WIP !\n\t */\n\n\tvar legendkeys = [];\n\n\tvar map = L.map('map', {\n\t\tscrollWheelZoom: false,\n\t\tcenter: [14.0, 14.0],\n\t\tzoom: 6,\n\t\tattributionControl: false\n\t});\n\n\tvar photoLayer = L.photo.cluster().on('click', function(evt) {\n\t\tvar photo = evt.layer.photo,\n\t\t\ttemplate = '<img src=\"{url}\"/></a><p>{caption}</p>';\n\n\t\t// Portrait vs Landscape\n\t\tvar photoWidth = window.innerWidth / 2; // for landscape photos\n\n\t\tif (photo.width < photo.height) {\n\t\t\tphotoWidth = window.innerWidth / 4; // for portrait photos\n\t\t}\n\t\tif (window.innerWidth < 500) {\n\t\t\tphotoWidth = window.innerWidth / 1.25; // landscape on mobile screens\n\n\t\t\tif (photo.width < photo.height) {\n\t\t\t\tphotoWidth = window.innerWidth / 1.5; // portrait on mobile screens\n\t\t\t}\n\t\t}\n\n\t\tvar photoHeight = photoWidth * (photo.height / photo.width);\n\n\t\tevt.layer.bindPopup(L.Util.template(template, photo), {\n\t\t\tclassName: 'leaflet-popup-photo',\n\t\t\tminWidth: photoWidth // was 500\n\t\t}).openPopup()\n\t});\n\n\tmap.on('popupopen', function(e) {\n\t\tvar px = map.project(e.popup._latlng);\n\t\tpx.y -= 200;\n\t\tmap.panTo(map.unproject(px), {}); // pan to new center\n\t});\n\n\n\n\treqwest({\n\t\turl: '/map/13/49',\n\t\tsuccess: function(data) {\n\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\tlegendkeys.push({\n\t\t\t\t\tcoordinates: [data[i].lat, data[i].lng, 30],\n\t\t\t\t\ttext: data[i].id,\n\t\t\t\t\tthumbnail: data[i].thumbnail\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t////////////////////////////////////////\n\t\t\t// add everything to map\n\t\t\t//////////////////////////////////////\n\n\t\t\tvar legend1 = {\n\t\t\t\ttitle: \"Feautred\",\n\t\t\t\tdescription: \"Thumbails\",\n\t\t\t\t//displayPopup: false,\n\t\t\t\tsections: [{\n\t\t\t\t\ttitle: 'ALL',\n\t\t\t\t\tclassName: 'roads',\n\t\t\t\t\tkeys: legendkeys\n\t\t\t\t}]\n\t\t\t};\n\n\t\t\tvar layer = new\n\t\t\t\tL.tileLayer(\n\t\t\t\t'http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png', {\n\t\t\t\t\tlegend: legend1,\n\t\t\t\t\topenLegendOnLoad: false,\n\t\t\t\t\tattribution: '&copy; <a href=\"http://cartodb.com/attributions\">CartoDB</a>'\n\t\t\t\t});\n\n\t\t\tconsole.log(layer);\n\n\t\t\tmap.addLayer(layer);\n\n\t\t\tvar legendControl = (new L.Control.TileLegend()).addTo(map);\n\n\n\t\t\tphotoLayer.add(data).addTo(map);\n\n\t\t\t// map.fitBounds(photoLayer.getBounds());\n\t\t}\n\t});\n\n})(jQuery);\n"],"sourceRoot":"/source/"}